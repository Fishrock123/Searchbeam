/* Â© 2013, Jeremiah Senkpiel, built: 2013-11-09 */
$(document).ready(function(){function a(a){window.clearTimeout(d),d=window.setTimeout(function(){$(".login").addClass("hidden"),$(".blurable").removeClass("blur"),$("#cover").removeClass("show_cover"),$("#auth").addClass("faint")},a)}function b(a){window.clearTimeout(d),d=-1,$("#auth").removeClass("faint"),user===!1&&(d=window.setTimeout(function(){$(".login").removeClass("hidden"),window.innerWidth>720&&$(".blurable").addClass("blur"),$("#cover").addClass("show_cover")},a))}var c=0,d=-1,e=0,f=window.location.pathname.slice(1);""===f&&(f="home"),f=f.match(/home|about|projects|blog/),f&&f.length>0&&$("#"+f[0]).children().addClass("current-page"),$(window).scroll(function(){((c=$(window).scrollTop())>25?c=25:c)<0?c=0:c,c!==e&&($("header").css("line-height",45-c+"px"),$("header > .line").css("height",55-c+"px"),e=c)}),window.setTimeout(function(){$("#cover").addClass("cover-transition")},1e3),$("#auth, .login_box, .login > .triangle").hover(function(){b(300)},function(){a(800)}).on("touchend",function(){b(60)}),$("#cover").on("touchend",function(){a(100)}),$("#auth").click(function(){return user===!1?!1:($("#ainfo").text("Logging out..."),$("#auth-err, #auth-success").hide(),$("#auth").addClass("faint"),$.ajax({type:"POST",url:"/logout",dataType:"html",error:function(a,b){console.log(b)},success:function(a){$("#auth").html(a)},timeout:6e4}),!1)}),$("#login").submit(function(){return $("#auth-err, #auth-success").hide(),$.ajax({type:"POST",url:"/auth",data:$("#login").serialize(),dataType:"json",error:function(a,b){console.log(b)},success:function(a){a.error?$("#auth-err").show().text(a.error):a.success&&($("#auth-success").show().text(a.success),$("#auth").html(a.html),window.clearTimeout(d),d=window.setTimeout(function(){$(".login").addClass("hidden"),$(".blurable").removeClass("blur"),$("#cover").removeClass("show_cover"),$("#auth").addClass("faint")},2e3))},timeout:6e4}),!1})});