/* © 2014, Jeremiah Senkpiel, built: 2014-04-16 */
$(document).ready(function(){function a(a){window.clearTimeout(d),d=window.setTimeout(function(){$(".login").addClass("hidden"),$(".blurable").removeClass("blur"),$("#cover").removeClass("show_cover"),$("#auth").addClass("faint")},a)}function b(a){window.clearTimeout(d),d=-1,$("#auth").removeClass("faint"),null===user&&(d=window.setTimeout(function(){$(".login").removeClass("hidden"),$(".blurable").addClass("blur"),$("#cover").addClass("show_cover")},a))}var c=0,d=-1,e=0,f=!1,g=$(window),h=$("header"),i=$("header > .line"),j=window.location.pathname.slice(1)+window.location.search;j=j||"home",j=j.match(/home|about|projects|blog(?!\?title=|\?id=)/),j&&j.length>0&&$("#"+j[0]).children().addClass("current-page"),console.log("    ‚‚\n!  ∞¨ ⁻⁻)⧜\n    ˙˙˙˙"),g.scroll(function(){((c=g.scrollTop())>25?c=25:c)<0?c=0:c,c!==e&&(h.css("line-height",45-c+"px"),i.css("height",55-c+"px"),e=c)}),window.setTimeout(function(){$("#cover").addClass("cover-transition")},1e3),$("#auth, .login_box, .login > .triangle").hover(function(){b(300)},function(){a(800)}),$("#auth_touchbox").on("touchstart",function(){f=!1}).on("touchmove",function(){f=!0}).on("touchend",function(){f||b(60)}),$("#cover").on("touchend",function(){a(100)}).hover(function(){-1===d&&a(800)}),$(this).on("mouseout",function(a){var b=a.relatedTarget||a.toElement;b&&"HTML"!=b.nodeName||(window.clearTimeout(d),d=-1)}),$("#auth").click(function(){return null===user?!1:($("#ainfo").text("Logging out..."),$("#auth-err, #auth-success").hide(),$("#auth").addClass("faint"),user=null,$.ajax({type:"POST",url:"/api/v1/auth/logout",dataType:"html",error:function(a,b){console.log(b)},success:function(a){$("#auth").html(a)},timeout:6e4}),!1)}),$("#login").submit(function(){return $("#auth-err, #auth-success").hide(),$.ajax({type:"POST",url:"/api/v1/auth/login",data:$("#login").serialize(),dataType:"json",error:function(a,b){console.log(b)},success:function(a){a.error?$("#auth-err").show().text(a.error):a.success&&($("#auth-success").show().text(a.success),$("#auth").html(a.html),user=a,window.clearTimeout(d),d=window.setTimeout(function(){$(".login").addClass("hidden"),$(".blurable").removeClass("blur"),$("#cover").removeClass("show_cover"),$("#auth").addClass("faint")},2e3))},timeout:6e4}),!1})});